{% extends 'core/base.html' %}
{% load humanize %}
{% block content %}
<div class="container">
  <div class="d-flex justify-content-between align-items-center">
    <h1 class="mt-3 mb-3">Students</h1>
    <a href="{% url 'student_add' %}" class="btn btn-primary">+ New</a>
  </div>

  <table class="table table-striped">
    <thead>
      <tr>
        <th>#</th>
        <th>First Name</th>
        <th>Last Name</th>
        <th>School ID</th>
        <th>Email</th>
        <th>Last Checkin</th>
      </tr>
    </thead>
    <tbody>
      {% for student in students %}
      <tr>
        <th scope="row">{{ forloop.counter }}</th>
        <td>
          <a href="{% url 'student' student.id %}">{{ student.first_name }}</a>
        </td>
        <td>
          <a href="{% url 'student' student.id %}">{{ student.last_name }}</a>
        </td>
        <td>
          <a href="{% url 'student' student.id %}">{{ student.student_id }}</a>
        </td>
        <td>
          <a href="mailto:{{ student.email | default_if_none:""}}">{{ student.email | default_if_none:""}}</a>
        </td>
        <td><a href="{{ student.last_checkin.url }}">{{ student.last_checkin.date | naturaltime }}</a></td>
      </tr>
      {% empty %}
      <p class="text-muted">Sorry, we couldn't find any students for you.</p>
      {% endfor %}
    </tbody>
  </table>

  <p class="text-muted">Showing <b>{{ students | length | apnumber }}</b> of <b>{{ student_total | apnumber}}</b> student{{ student_total | pluralize }}.</p>
</div>
{% endblock %}
